<!DOCTYPE html>
<html lang="{{ lang }}">

    <head>
        <meta charset="UTF-8">
        <meta charset="{{ charset }}">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="theme-color" content="#2B2B35">

        <title>{{ title }}</title>
        {% for css_url in css %}
        <link rel="stylesheet" href="{{ css_url }}">{% endfor %}
        {% for js_url in js %}
        <script src="{{ js_url.path }}" {% if js_url.defer %} defer{% endif %}></script>{% endfor %}
    </head>

    <body>
        <div class="art-app">
            <div class="art-mobile-top-bar"></div>
            <div class="art-app-wrapper">
                <div class="art-app-container">

                    <!-- info bar -->

                    <!-- info bar end -->

                    <!-- content -->
                    <div class="art-content">

                        <!-- curtain -->
                        <div class="art-curtain"></div>

                        <!-- top background -->
                        <div class="art-top-bg" style="background-image: url({{background}})">
                            <!-- overlay -->
                            <div class="art-top-bg-overlay"></div>
                            <!-- overlay end -->
                        </div>
                        <!-- top background end -->

                        <!-- swup container -->
                        <div class="transition-fade" id="swup">

                            <!-- scroll frame -->
                            <div id="scrollbar" class="art-scroll-frame">

                                <!-- container -->
                                {{ sections_content | safe }}

                            </div>
                            <!-- scroll frame end -->

                        </div>
                        <!-- swup container end -->

                    </div>
                    <!-- content end -->

                    <!-- menu bar -->
                    <div class="art-menu-bar">

                        <!-- menu bar frame -->
                        <div class="art-menu-bar-frame">

                            <!-- menu bar header -->
                            <div class="art-menu-bar-header">
                                <!-- menu bar button -->
                                <div class="art-menu-bar-btn">
                                    <!-- icon -->
                                    <span></span>
                                </div>
                                <!-- menu bar button end -->
                            </div>
                            <!-- menu bar header end -->

                            <!-- current page title -->
                            <div class="art-current-page"></div>
                            <!-- current page title end -->

                            <!-- scroll frame -->
                            <div class="art-scroll-frame">

                                <!-- menu -->
                                <nav id="swupMenu">
                                    <!-- menu list -->
                                    <ul class="main-menu">
                                        {% for element in menu %}
                                        <li
                                            class="menu-item {% if element.name == title %} current-menu-item {% endif %}">
                                            <a href="{{element.url}}">{{element.name}}</a>
                                        </li>
                                        {% endfor %}
                                    </ul>
                                    <!-- menu list end -->
                                </nav>
                                <!-- menu end -->

                                <!-- language change -->
                                <!-- <ul class="art-language-change">
                                    <li><a href="#.">FR</a></li>
                                    <li class="art-active-lang"><a href="#.">EN</a></li>
                                </ul> -->
                                <!-- language change end -->

                            </div>
                            <!-- scroll frame end -->

                        </div>
                        <!-- menu bar frame -->

                    </div>
                    <!-- menu bar end -->

                </div>
                <!-- app container end -->

            </div>
            <!-- app wrapper end -->

            <!-- preloader -->
            <div class="art-preloader">
                <!-- preloader content -->
                <div class="art-preloader-content">
                    <!-- title -->
                    <h4>{{first_name}} {{last_name}}</h4>
                    <!-- progressbar -->
                    <div id="preloader" class="art-preloader-load"></div>
                </div>
                <!-- preloader content end -->
            </div>
            <!-- preloader end -->
        </div>

        <script>
            // // Function to initialize all progress circles with individual values
            // function initializeAllProgressBars() {
            //     const circles = document.querySelectorAll('.progress-circle');

            //     if (circles.length === 0) {
            //         console.warn("No progress circles found.");
            //         return; // Stop if no circles exist
            //     }

            //     circles.forEach((circle) => {
            //         // Get the individual value from data attribute (e.g., data-value="0")
            //         const value = parseFloat(circle.getAttribute('data-value')) || 0;

            //         // Create a new ProgressBar.Circle for each element
            //         const bar = new ProgressBar.Circle(circle, {
            //             strokeWidth: 7,
            //             easing: 'easeInOut',
            //             duration: 1400,
            //             trailWidth: 7,
            //             step: function (state, circle) {
            //                 const percentage = Math.round(circle.value() * 100);
            //                 // Always show percentage including 0%
            //                 circle.setText(`${percentage}`);
            //             }
            //         });

            //         // Animate the circle to its specific value
            //         bar.animate(value / 100);  // Animate to the value (between 0 and 1)
            //     });
            // }

            // // Initialize on page load
            // // initializeAllProgressBars();

            // // Re-initialize on Swup content replacement
            // document.addEventListener("swup:contentReplaced", initializeAllProgressBars);

            // // Function to initialize all line progress bars with individual values
            // function initializeAllLineProgressBars() {
            //     const lines = document.querySelectorAll('.line-progress');

            //     if (lines.length === 0) {
            //         console.warn("No line progress bars found.");
            //         return; // Stop if no lines exist
            //     }

            //     lines.forEach((line) => {
            //         // Get the individual value from data attribute (e.g., data-value="0.5")
            //         const value = parseFloat(line.getAttribute('data-value')) || 0;

            //         // Create a new ProgressBar.Line for each element
            //         const bar = new ProgressBar.Line(line, {
            //             strokeWidth: 1.72,
            //             easing: 'easeInOut',
            //             duration: 1400,
            //             delay: 2800,
            //             trailWidth: 1.72,
            //             svgStyle: {
            //                 width: '100%',
            //                 height: '100%'
            //             },
            //             step: (state, bar) => {
            //                 bar.setText(Math.round(bar.value() * 100) + ' %'); // Show percentage
            //             }
            //         });

            //         // Animate the line to its specific value
            //         bar.animate(value/100); // Animate to the value (between 0 and 1)
            //     });
            // }

            // // Initialize on page load
            // // initializeAllLineProgressBars();

            // // Re-initialize on Swup content replacement (if applicable)
            // document.addEventListener("swup:contentReplaced", initializeAllLineProgressBars);
        </script>
    </body>

</html>